knitr::opts_chunk$set(echo = TRUE)
library(tidyr)
library(dplyr)
WorldPhones %>%
tbl_df() %>%
mutate(year = factor(row.names(WorldPhones))) %>%
gather(country, number, -year) %>%
mutate(country = factor(country))
WorldPhones %>%
tbl_df() %>%
mutate(year = factor(row.names(WorldPhones))) %>%
gather(country, number, -year) %>%
mutate(country = factor(country))
a = c(1,2,3)
[1:2](a)
a[1:2]
knitr::opts_chunk$set(echo = TRUE)
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
library(dplyr)
library(tidyr)
names(EPA)
head(select(EPA,c("Land Use","Location Setting",
"State Name","County Name","City Name" )))
library(readr)
install.packages("readr")
library(readr)
data <- read_csv("SPEC_2014.csv.zip")
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- full_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
# select(c("Land Use","Location Setting",
#          "State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- full_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
# select(c("Land Use","Location Setting",
#          "State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- full_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number",
"Longitude" = "Longitude"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- full_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- inner_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"Longitude","Latitude")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
total_data <- inner_join(data, EPA_tidy, by = c("Latitude" = "Latitude",
"Longitude" = "Longitude"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- inner_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"Longitude","Latitude")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
total_data <- full_join(data, EPA_tidy, by = c("Latitude" = "Latitude",
"Longitude" = "Longitude"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
EPA_tidy <- EPA %>%
select(c("Land Use","Location Setting",
"State Code","County Code","Site Number")) %>%
rename(Land.Use="Land Use", Location.Setting="Location Setting")
data <- data %>%
mutate(State.Code = as.numeric(State.Code),
County.Code = as.numeric(County.Code),
Site.Num = as.numeric(Site.Num))
total_data <- inner_join(data, EPA_tidy, by = c("State.Code" = "State Code",
"County.Code" = "County Code",
"Site.Num" = "Site Number"))
total_data %>%
select(c("Parameter.Name","Sample.Value","Longitude",
"Land.Use","Location.Setting")) %>%
mutate(Location = factor(Longitude < -100,labels=c("Eastern","Western"))) %>%
filter(Location == "Eastern" &
Parameter.Name %in% c("OC PM2.5 LC TOR","EC PM2.5 LC TOR") &
Land.Use == "RESIDENTIAL" &
Location.Setting == "SUBURBAN") %>%
group_by(Parameter.Name,Location,Land.Use,Location.Setting) %>%
summarize(Med.Value = median(Sample.Value))
2 == c(1,2)
knitr::opts_chunk$set(echo = TRUE)
visual <- function(id, visit, room,
dataset="MIE.zip", c_types="cicdi") {
mie <- read_csv(dataset, col_types = c_types)
library(readr)
library(dplyr)
library(ggplot2)
mie.sub <- mie
title = ''
if(!hasArg(id) & !hasArg(visit) & !hasArg(room))
qplot(timepoint, value, data = mie) + ggtitle("All Data")
else{
if(hasArg(id)){
input_id = as.character(id)
mie.sub <- filter(mie.sub, id == input_id)
title = paste(title, sprintf(" id = %s",id))
}
if(hasArg(visit)){
input_visit = int(visit)
mie.sub <- filter(mie.sub, visit == input_visit)
title = paste(title, sprintf(" visit = %s",visit))
}
if(hasArg(room)){
input_room = as.character(room)
mie.sub <- filter(mie.sub, room == input_room)
title = paste(title, sprintf(" room = %s",room))
}
if(count(mie.sub) == 0)
stop("Wrong Factors!\n")
qplot(timepoint, value, data = mie.sub) + ggtitle(title)
}
}
visual()
visual <- function(id, visit, room,
dataset="MIE.zip", c_types="cicdi") {
library(readr)
library(dplyr)
library(ggplot2)
mie <- read_csv(dataset, col_types = c_types)
mie.sub <- mie
title = ''
if(!hasArg(id) & !hasArg(visit) & !hasArg(room))
qplot(timepoint, value, data = mie) + ggtitle("All Data")
else{
if(hasArg(id)){
input_id = as.character(id)
mie.sub <- filter(mie.sub, id == input_id)
title = paste(title, sprintf(" id = %s",id))
}
if(hasArg(visit)){
input_visit = int(visit)
mie.sub <- filter(mie.sub, visit == input_visit)
title = paste(title, sprintf(" visit = %s",visit))
}
if(hasArg(room)){
input_room = as.character(room)
mie.sub <- filter(mie.sub, room == input_room)
title = paste(title, sprintf(" room = %s",room))
}
if(count(mie.sub) == 0)
stop("Wrong Factors!\n")
qplot(timepoint, value, data = mie.sub) + ggtitle(title)
}
}
visual()
visual(room="bedroom")
visual(id=20, room="bedroom")
# visual()
# visual(room="bedroom")
# visual(id=20, room="bedroom")
library(readr)
library(dplyr)
library(ggplot2)
mie <- read_csv("MIE.zip", col_types = "cicdi")
mie = group_by(mie, id)
qplot(timepoint, value, data = mie)
